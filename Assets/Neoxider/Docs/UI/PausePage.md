# Компонент PausePage

## 1. Введение

`PausePage` — компонент для управления паузой при активации GameObject (например, панели паузы). Все опции включены по желанию: масштаб времени, уведомление GM и управление курсором. При отключении восстанавливаются сохранённые `Time.timeScale` и состояние курсора, поэтому компонент не конфликтует с `CursorLockController` и `PlayerController3DPhysics` / `PlayerController2DPhysics`.

---

## 2. Описание класса

### PausePage

- **Пространство имён**: `Neo.Tools`
- **Путь**: `Assets/Neoxider/Scripts/UI/PausePage.cs`

**Поведение**

- При **OnEnable**: по опциям — выставляет `Time.timeScale`, вызывает `GM.I?.Pause()`, при включённом управлении курсором сохраняет текущее состояние курсора и показывает/разблокирует его.
- При **OnDisable**: восстанавливает прежний `Time.timeScale`, вызывает `GM.I?.Resume()` и при управлении курсором восстанавливает сохранённое состояние курсора.

**Параметры**

| Параметр | Описание |
|----------|----------|
| **Time / Use Time Scale** | Включить изменение `Time.timeScale` при паузе и восстановление при снятии. |
| **Time Scale On Pause** | Значение `Time.timeScale` во время паузы (0 = полная пауза). |
| **Game Manager / Send Pause** | Вызывать `GM.I.Pause()` при включении и `GM.I.Resume()` при выключении. |
| **Cursor / Control Cursor** | Показывать и разблокировать курсор при паузе; при снятии паузы восстанавливать предыдущее состояние (совместимо с любым источником блокировки). |

**Анимации**

В `OnValidate` компонент ищет `Animator` на том же объекте и выставляет `updateMode = UnscaledTime`, чтобы анимации UI шли во время паузы.

**Публичные методы**

Нет методов для вызова из кода; настройка только через Inspector.

---

## 3. Совместная работа с курсором и контроллерами

- **CursorLockController**: может блокировать курсор в геймплее. Включите у `PausePage` опцию **Control Cursor** — при открытии паузы курсор покажется и разблокируется, при закрытии вернётся прежнее состояние (в т.ч. снова заблокирован).
- **PlayerController3DPhysics** / **PlayerController2DPhysics**: сами управляют курсором (например, lock on start). `PausePage` при **Control Cursor** только сохраняет и восстанавливает состояние; конфликта нет.

---

## 4. Быстрый сценарий

1. Добавьте `PausePage` на GameObject панели паузы (часто отключена по умолчанию).
2. Включите нужные опции: **Use Time Scale**, **Send Pause**, при необходимости **Control Cursor**.
3. При показе панели (SetActive(true)) пауза и курсор (если включено) применяются; при скрытии — восстанавливаются.
