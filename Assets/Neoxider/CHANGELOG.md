# Журнал изменений (Changelog)

Все заметные изменения в этом проекте будут задокументированы в этом файле.

## [v5.2.10]

### Добавлено
- InteractiveObject:
  - Автодобавление `PhysicsRaycaster`/`Physics2DRaycaster` на `Camera.main` для 3D/2D объектов соответственно.
  - Новые события: `onMiddleClick`, `onInteractDown`, `onInteractUp`.
  - Параллельная обработка нажатий мыши и клавиши (down/up) в `Update` с гибкой привязкой.
  - Группировка секций в инспекторе через `Header` для удобства настройки.
- Shop:
  - Флаг `_changePreviewOnPurchaseFailed` — переключать превью при нехватке денег (по умолчанию: выключено).
  - Сохранение/загрузка последнего экипированного индекса (`_keySaveEquipped`).
  - Инициализация превью и выделения по сохранённому индексу.
- ShopItem:
  - Опциональная поддержка `SpriteRenderer` для установки спрайтов товара и иконки.
 - MouseEffect:
  - Поле `interactable` (по умолчанию включено) — при выключении компонент игнорирует события мыши.
  - Поле `disableOnRelease` (по умолчанию включено) — управляет отключением `TrailRenderer` и `followObject` при отпускании мыши.
  - Подписки перенесены в `OnEnable`/`OnDisable`; добавлен `followInterval` и `spawnParent`.
  - Добавлены UnityEvents: `onStartFollow`, `onStopFollow`, `onSpawn`.
  - Для `TrailRenderer` используется `emitting` вместо `enabled`; `Clear()` вызывается при старте следования.
  - Добавлено автоудаление спавнимых префабов: `spawnLifetime` (0 = без автоудаления).

### Изменено
- InteractiveObject:
  - Двойной клик отключается при `doubleClickThreshold = 0`.
  - клики управляются EventSystem.
 - MouseInputManager:
  - Добавлено автосоздание синглтона после загрузки сцены (если отсутствует в сцене), объект помечается `DontDestroyOnLoad`.
  - Добавлены статические поля поллинга: `LastEventData`, `HasEventData`, а также `LastEventDataRef` (ref readonly) для доступа без копирования.

### Документация
- Обновлены `Docs/Tools/InteractableObject/InteractiveObject.md` и `Docs/Shop/Shop.md` в соответствии с Руководством по документации.

## [v5.2.9]

### UI Blur shader
- добавлены 3 шейдера для размытия UI

### Добавлено
- **Система анимаций**: Полностью новая универсальная система анимации с поддержкой любых типов данных
  - `AnimationUtils` — статические утилиты для расчета анимированных значений по времени
  - `AnimationType` — 9 типов анимации: от простых синусоид до сложного шума Перлина
  - `FloatAnimator` — универсальный аниматор для числовых значений
  - `ColorAnimator` — универсальный аниматор для цветов
  - `Vector3Animator` — универсальный аниматор для векторов (позиция, масштаб, поворот)
  - `LightAnimator` — улучшенный аниматор источников света с расширенным API
  - `MeshEmission` — компонент для синхронизации эмиссии материалов с источником света

### Изменено
- **LightAnimator**: Полностью переработан с переходом на Update вместо корутин
  - Добавлены публичные методы управления: `Play()`, `Pause()`, `Stop()`, `Resume()`, `ResetToOriginal()`
  - Добавлены свойства состояния: `IsPlaying`, `IsPaused`, `CurrentIntensity`, `CurrentColor`
  - Добавлены UnityEvents для реакции на изменения интенсивности и цвета
  - Публичные свойства для изменения параметров извне
  - Поддержка новых типов анимации и пользовательских кривых

-  **MeshEmission**:
  - Убрана автономная анимация — теперь только синхронизация с Light компонентом
  - Настройки синхронизации: `syncIntensity`, `syncColor`, `intensityMultiplier`
  - Задержка синхронизации: `syncDelay`, `syncCurve`
  - Автопоиск света только у себя и дочерних объектов
  - Публичные методы управления и события

### Документация
- Создана полная документация для системы анимаций в `Docs/Animations/`
- Обновлена документация для `LightAnimator` и `MeshEmission`
- Добавлены примеры использования и советы по оптимизации

## [v5.2.8]

### Изменено
- **Slot Machine**: Полностью переработан модуль слот-машины. Новая архитектура стала более гибкой, производительной и простой в настройке. Все ключевые параметры (ставки, линии, символы, множители) вынесены в `ScriptableObject`.
- **Spawner**:
  - Добавлен публичный метод `SpawnById(int prefabId, Vector3 position)` для спавна префаба по ID в указанной позиции.
  - Добавлено публичное событие `OnObjectSpawned` (`UnityEvent<GameObject>`), которое вызывается после создания нового объекта.
  - Методы `StartSpawn`, `StopSpawn`, `SpawnRandomObject` и `Clear` теперь помечены атрибутом `[Button]`, что позволяет вызывать их напрямую из инспектора Unity.
  - Методы спавна (`SpawnObjects`, `SpawnRandomObject`) сделаны публичными для большей гибкости.

### Документация
- Обновлена и переформатирована документация для `Spawner` в соответствии с новым руководством. Добавлены разделы "Настройки в инспекторе" и "Как использовать".

## [v5.2.7]

### Добавлено
- Новый компонент `LightAnimator` для процедурной анимации источников света (`Light` и `Light2D`).

### Изменено
- **UI Blur**: Добавленны шейдеры размытия для UI.
- **AiNavigation**: компонент улучшен, добавлены публичные свойства для управления параметрами (`StoppingDistance`, `BaseSpeed` и др.) в реальном времени.
- **AdvancedAttackCollider**: Добавлена возможность настраивать (цвет) и отключать отображение Gizmo в редакторе.
- **Spawner**: Добавлена возможность автоматического удаления созданных объектов через заданный промежуток времени (`_destroyDelay`).
- **Spawner**: Удалена система взвешенного шанса для упрощения компонента. Выбор префаба для спавна теперь всегда равномерно случайный.
- **SetText**: код был отрефакторен для большей чистоты и ясности.
- **RewertAmount**: исправлена опечатка в названии класса и файла на `RevertAmount`.

### Документация
- Создан `CHANGELOG.md` для отслеживания изменений.
- Полностью переработана и дополнена документация для модулей в `Docs/Tools/Other` и `Docs/Tools/Text`.
- Обновлена документация для `AdvancedAttackCollider` и `Spawner`.
