# Инструмент Health

## 1. Введение

`Health` — это универсальный компонент для управления здоровьем любого игрового объекта. Он отслеживает текущее и максимальное здоровье, обрабатывает получение урона, исцеление и смерть. Компонент также включает в себя настраиваемую систему автоматической регенерации здоровья.

---

## 2. Описание класса

### Health
- **Пространство имен**: `Neo.Tools`
- **Путь к файлу**: `Assets/Neoxider/Scripts/Tools/Components/AttackSystem/Health.cs`

**Описание**
Реализует систему здоровья для игрового объекта.

### Ключевые особенности
- **Гибкая инициализация**: Позволяет задать начальное здоровье в инспекторе или полностью восстановить его при старте.
- **Урон и исцеление**: Предоставляет публичные методы `TakeDamage` и `Heal`.
- **Точные события**: События `OnDamage` и `OnHeal` передают фактическое количество полученного урона/лечения с учетом лимитов.
- **Событие смерти**: Вызывает событие `OnDeath`, когда здоровье падает до нуля.
- **Авто-регенерация**: Может автоматически восстанавливать здоровье с заданной скоростью и количеством.
- **Лимиты**: Позволяет ограничить максимальный урон или исцеление, получаемое за один раз.
- **Интерфейсы**: Реализует `IDamageable`, `IHealable`, `IRestorable` для легкой интеграции с другими системами.

---

## 3. Публичные поля (Настройки)

Эти поля можно изменять как в инспекторе, так и из других скриптов во время выполнения.

- `maxHp` (`int`): Максимальное количество здоровья.
- `healAmount` (`int`): Количество здоровья, восстанавливаемое за один тик авто-регенерации.
- `healDelay` (`float`): Задержка между тиками авто-регенерации в секундах.
- `maxDamageAmount` (`int`): Максимальный урон, который можно получить за один раз. `-1` означает отсутствие лимита.
- `maxHealAmount` (`int`): Максимальное лечение, которое можно получить за один раз. `-1` означает отсутствие лимита.

---

## 4. Приватные настройки (инспектор)

- `hp` (`int`): Начальное количество здоровья. Будет применено на старте, если `restoreOnAwake` отключено.
- `restoreOnAwake` (`bool`): Если `true` (по умолчанию), здоровье будет полностью восстановлено при запуске сцены. Если `false`, будет использовано значение из поля `hp`.
- `ignoreIsAlive` (`bool`): Если `true`, авто-регенерация сможет работать даже тогда, когда здоровье равно нулю.

---

## 5. Публичные свойства (Только для чтения)

- `Hp` (`int`): Текущее количество здоровья. Присваивание значения этому свойству автоматически вызовет события `OnChange` и `OnChangePercent`.
- `MaxHp` (`int`): Возвращает максимальное количество здоровья.
- `IsAlive` (`bool`): Возвращает `true`, если `Hp` больше 0.
- `CanHeal` (`bool`): Возвращает `true`, если объект может быть исцелен.
- `NeedHeal` (`bool`): Возвращает `true`, если текущее здоровье меньше максимального.

---

## 6. Публичные методы

- `TakeDamage(int count)`: Наносит урон объекту.
- `Heal(int count)`: Исцеляет объект.
- `Restore()`: Полностью восстанавливает здоровье до максимума.
- `SetMaxHp(int count, bool restore)`: Устанавливает новое максимальное здоровье и опционально восстанавливает его.
- `SetHp(int count)`: Напрямую устанавливает текущее количество здоровья.
- `SetHeal(int amount, float delay)`: Настраивает параметры авто-регенерации.

---

## 7. Unity Events

- `OnChange`: Вызывается при любом изменении здоровья. Передает `int` (новое значение hp).
- `OnChangePercent`: То же, но передает `float` (процент здоровья от 0 до 1).
- `OnDamage`: Вызывается при получении урона. Передает `int` ( **фактическое** количество полученного урона).
- `OnHeal`: Вызывается при исцелении. Передает `int` ( **фактическое** количество исцеления).
- `OnDeath`: Вызывается один раз, когда здоровье достигает нуля.
- `OnChangeMaxHp`: Вызывается при изменении максимального здоровья. Передает `int` (новое значение maxHp).
