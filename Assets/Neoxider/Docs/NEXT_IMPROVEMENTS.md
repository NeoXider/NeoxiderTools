# Новые скрипты или улучшения для функциональности

Идеи для расширения NeoxiderTools после внедрения текущих исправлений (Shop, Components, унификация). Можно использовать как backlog для следующих релизов.

---

## Универсальный вывод значения в UI

- **ValueDisplay / NumericDisplay** — один No-Code компонент вывода числа из разных источников: Counter, ScoreManager, Money, произвольное поле (через enum или интерфейс). Уменьшает дублирование логики TextScore/TextMoney.
- **Вариант:** вынести общую логику ожидания синглтона и подписки/отписки в базовый класс или утилиту, оставив TextScore и TextMoney как тонкие обёртки.

---

## События и подписки

- **Кэш делегатов для UnityEvent** — хелпер или базовый класс для компонентов с динамическими подписками по id: хранить список делегатов и при отписке вызывать RemoveListener с тем же экземпляром (паттерн внедрён в Shop, можно переиспользовать в других модулях).
- **Компонент «события по индексу»** — универсальная обёртка: при вызове метода с параметром int вызывается соответствующий UnityEvent из списка (аналог ChanceSystemBehaviour.EventsByIndex для вкладок, меню, типов лута без привязки к ChanceManager).

---

## Интеграции между модулями

- **Shop + Inventory** — оплата предметами инвентаря: трата предмета по itemId как валюта (например «1 меч = 100 монет» или «оплата мечами»). Отдельный компонент ShopInventoryPayment или расширение Shop с типом валюты Money | InventoryItem.
- **ChanceSystemBehaviour + Loot** — один демо-префаб или сцена «взвешенный дроп» в Samples (уже описано в Loot.md).
- **NeoCondition + Inventory** — **уже работает** для общих свойств: в NeoCondition можно выбрать компонент `InventoryComponent` и свойства `TotalItemCount`, `UniqueItemCount`, `SelectedItemCount`, `IsEmpty` (см. [InventoryComponent](./Tools/Inventory/InventoryComponent.md)). Не покрыто без кода: условие «количество **конкретного предмета** (по itemId) >= N» — NeoCondition читает только свойства без параметров, а `GetCount(int itemId)` требует аргумент. Варианты: добавить на `InventoryComponent` свойство-обёртку вида «Count Of Item» с полем `_conditionItemId` в инспекторе, которое возвращает `GetCount(_conditionItemId)`, либо пример в доке с подпиской на события инвентаря и ручной проверкой в коде.

---

## Сохранение и загрузка

- **Единая точка Save()** — опциональный глобальный вызов SaveProvider.Save() при паузе/выходе (например из SceneFlowController или компонента OnApplicationQuit/Pause), чтобы не вызывать Save() при каждом изменении в каждом модуле. Документировать рекомендуемый подход.
- В README Save и в модулях, использующих SaveProvider, явно описать: когда вызывается Save(), нужен ли ручной вызов при выходе.

---

## Мелкие универсальные компоненты

- **ToggleByIndex** — переключатель N состояний по индексу (0..N-1): кнопки или вызов SetIndex(int); событие OnIndexChanged(int); визуал по индексу. Удобно для вкладок, режимов, выбора типа.
- **Float/Int Clamp** — компонент «значение в диапазоне» с событиями при изменении и при достижении min/max (здоровье, прогресс, таймеры). Частично покрыто Counter/ScoreManager; при необходимости вынести в отдельный переиспользуемый компонент.

---

## Документация и процесс

- Единый шаблон страницы модуля: назначение, поля, API, пример (No-Code + код), «См. также».
- В крупных модулях — блок «Быстрый старт» и при необходимости демо-сцена в Samples.
- Устаревшие компоненты вести в DEPRECATED_OR_REMOVAL_CANDIDATES.md, в .md устаревшего компонента — пометка **[Obsolete]** и ссылка на замену.
