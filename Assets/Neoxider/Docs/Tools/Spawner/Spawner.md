# Компонент Spawner

## 1. Введение

`Spawner` — это мощный и гибкий компонент для создания объектов. Он тесно интегрирован с `PoolManager`, что делает его одновременно простым в настройке и высокопроизводительным.

Ключевые функции:
- **Интеграция с пулом объектов**: Автоматически использует `PoolManager` для оптимизации производительности. Пулинг можно отключить одной галочкой для отладки.
- **Автоматическое удаление**: Может автоматически удалять созданные объекты (или возвращать их в пул) по истечении заданного времени.
- **Случайный выбор префаба**: Равномерно случайно выбирает, какой из префабов создать, из предоставленного списка.
- **Области спавна**: Позволяет создавать объекты в случайных точках внутри заданного 3D или 2D коллайдера.
- **Непрерывный спавн**: Может автоматически создавать объекты с заданным интервалом и лимитом.

---

## 2. Описание класса

### Spawner
- **Пространство имен**: `Neo.Tools`
- **Путь к файлу**: `Assets/Neoxider/Scripts/Tools/Spawner/Spawner.cs`

**Описание**
Компонент, который управляет процессом создания объектов. Он может работать как в режиме непрерывного спавна, так и по запросу, используя `PoolManager` для выбора префаба и места спавна.

---

## 3. Настройки в инспекторе

### 3.1. Настройки спавна
- `_prefabs` (`GameObject[]`): Массив префабов, которые могут быть созданы этим спавнером.
- `_useObjectPool` (`bool`): Если `true` (по умолчанию), спавнер будет использовать `PoolManager` для создания и возврата объектов. Если `false`, будет использоваться обычный `Instantiate` и `Destroy`.
- `_destroyDelay` (`float`): Задержка в секундах перед автоматическим удалением созданного объекта. Если значение равно `0` (по умолчанию), объект не будет удаляться автоматически.
- `spawnLimit` (`int`): Максимальное количество объектов, которое будет создано в режиме непрерывного спавна. Если `0`, спавн будет бесконечным.
- `_minSpawnDelay`, `_maxSpawnDelay` (`float`): Минимальная и максимальная задержка между спавном объектов.

### 3.2. Прочие настройки
- `_spawnTransform` (`Transform`): Родительский `Transform` для всех создаваемых объектов. Если не задан, используется `Transform` самого спавнера.
- `_spawnOnAwake` (`bool`): Если `true`, непрерывный спавн начнется автоматически при старте сцены.

### 3.3. Область спавна
- `_spawnAreaCollider` (`Collider`): (Для 3D) Коллайдер, внутри которого будут случайно спавниться объекты. Поддерживает `BoxCollider`, `SphereCollider`, `CapsuleCollider`.
- `_spawnAreaCollider2D` (`Collider2D`): (Для 2D) Коллайдер, внутри которого будут случайно спавниться объекты. Поддерживает `BoxCollider2D`, `CircleCollider2D`.

---

## 4. Публичные методы

- `StartSpawn()`: Запускает непрерывный спавн объектов.
- `StopSpawn()`: Останавливает непрерывный спавн.
- `SpawnObject(GameObject prefab, ...)`: Создает указанный префаб. Использует `PoolManager`, если опция включена. Если `_destroyDelay` больше нуля, запускает таймер на автоматическое удаление.
- `GetSpawnPosition()`: Возвращает случайную позицию внутри настроенной области спавна.
- `Clear()`: Останавливает спавн, все запущенные корутины (включая отложенное удаление) и немедленно удаляет (или возвращает в пул) все объекты, созданные этим спавнером.
- `GetActiveObjectCount()`: Возвращает количество активных объектов, созданных этим спавнером.

---

## 5. Как использовать

1.  **Убедитесь, что `PoolManager` есть на сцене.** Просто добавьте компонент `PoolManager` на любой постоянный объект (например, на пустой `GameObject` с названием "--Services--").
2.  Добавьте компонент `Spawner` на нужный вам объект.
3.  **Настройте префабы**: Заполните массив `_prefabs` объектами, которые вы хотите спавнить.
4.  **(Опционально) Настройте авто-удаление**: Установите `_destroyDelay` в значение больше нуля, если хотите, чтобы объекты исчезали через некоторое время.
5.  **(Опционально) Настройте область спавна**: Добавьте `Collider` или `Collider2D` и перетащите его в соответствующее поле.
6.  **Запустите спавн**: Вызовите `StartSpawn()` для автоматического спавна или используйте `SpawnObject()` для ручного создания объектов.

**Важно:** Чтобы пулинг работал эффективно, на компонентах ваших префабов (например, на скрипте `Enemy.cs`) рекомендуется реализовать интерфейс `IPoolable` для сброса их состояния при повторном использовании.
