# ExplosiveForce

Компонент взрывной силы, который применяет взрывную силу ко всем объектам в заданном радиусе. Идеально подходит для создания взрывных бочек, гранат, взрывов при спавне и других эффектов.

## Возможности

- Применение взрывной силы ко всем объектам в радиусе
- Различные режимы активации (при старте, с задержкой, вручную)
- Фильтрация по слоям
- Опциональное добавление Rigidbody на объекты без физики
- Затухание силы по расстоянию (линейное/квадратичное)
- Режимы силы: AddForce, AddExplosionForce
- События для интеграции с другими системами

## Настройки

### Активация

- **Activation Mode**: Режим активации взрыва
  - `OnStart` - при старте (Start)
  - `OnAwake` - при пробуждении (Awake)
  - `Delayed` - с задержкой
  - `Manual` - только по вызову метода
- **Delay**: Задержка перед взрывом (для режима Delayed)

### Сила взрыва

- **Force**: Базовая сила взрыва
- **Force Randomness**: Случайная вариация силы
- **Force Mode**: Режим применения силы
  - `AddForce` - постоянная сила
  - `AddExplosionForce` - взрывная сила с затуханием
- **Falloff Type**: Тип затухания силы по расстоянию
  - `Linear` - линейное затухание
  - `Quadratic` - квадратичное затухание

### Радиус и фильтрация

- **Radius**: Радиус действия взрыва
- **Affected Layers**: Слои объектов, на которые будет воздействовать взрыв

### Опции

- **Add Rigidbody If Needed**: Автоматически добавлять Rigidbody на объекты без физики
- **Destroy After Explosion**: Уничтожить этот объект после взрыва
- **Destroy Delay**: Задержка перед уничтожением

## События

- **OnExplode**: Вызывается при взрыве
- **OnObjectAffected**: Вызывается для каждого затронутого объекта (GameObject)

## API

### Методы

```csharp
// Вызвать взрыв вручную с базовой силой из компонента
void Explode()

// Вызвать взрыв вручную с кастомной силой
void Explode(float customForce)

// Установить силу взрыва
void SetForce(float newForce)

// Установить радиус взрыва
void SetRadius(float newRadius)

// Сбросить состояние взрыва (позволяет взорваться снова)
void ResetExplosion()
```

**Примечание о ResetExplosion()**: 
- Для режимов `OnStart`, `OnAwake`, `Delayed` - после автоматического взрыва компонент блокирует повторные взрывы. Используйте `ResetExplosion()` чтобы "перезарядить" взрыв и позволить взорваться снова.
- Для режима `Manual` этот метод не обязателен, так как можно взрываться многократно без ограничений.

### Свойства

```csharp
// Текущая сила взрыва
float CurrentForce { get; }

// Текущий радиус взрыва
float CurrentRadius { get; }

// Проверка, произошел ли уже взрыв
bool HasExploded { get; }
```

## Примеры использования

### Взрывная бочка при спавне

1. Создайте GameObject с компонентом `ExplosiveForce`
2. Установите `Activation Mode` на `OnStart`
3. Установите `Delay` на 2 секунды (если нужна задержка)
4. Настройте `Force` и `Radius`
5. Настройте `Affected Layers`

### Взрыв по событию

```csharp
ExplosiveForce explosive = GetComponent<ExplosiveForce>();
explosive.Explode(150f); // Взрыв с силой 150
```

### Взрывная бочка с уничтожением

1. Включите `Destroy After Explosion`
2. Установите `Destroy Delay` (например, 0.5 секунды для эффекта)
3. Бочка автоматически уничтожится после взрыва

### Динамическое изменение параметров

```csharp
ExplosiveForce explosive = GetComponent<ExplosiveForce>();
explosive.SetForce(200f); // Увеличить силу
explosive.SetRadius(10f); // Увеличить радиус
```

### Перезарядка взрыва

```csharp
ExplosiveForce explosive = GetComponent<ExplosiveForce>();

// Если взрыв произошел автоматически (OnStart, OnAwake, Delayed),
// можно "перезарядить" его для повторного использования
explosive.ResetExplosion();
explosive.Explode(); // Теперь можно взорваться снова
```

## Визуализация

В режиме редактирования (при выборе объекта) отображается:
- Красная сфера - радиус взрыва
- Полупрозрачная красная сфера - область воздействия

## Примечания

- Компонент работает только с 3D физикой
- Для объектов без Rigidbody можно включить `Add Rigidbody If Needed`
- `AddExplosionForce` создает более реалистичный эффект взрыва
- Квадратичное затухание создает более естественный эффект


