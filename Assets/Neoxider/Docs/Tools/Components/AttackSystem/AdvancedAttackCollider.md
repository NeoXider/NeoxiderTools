# Инструмент Advanced Attack Collider

## 1. Введение

`AdvancedAttackCollider` — это компонент, представляющий собой физическую зону атаки (хитбокс), например, для удара мечом или когтями. При активации он на короткое время включает свой коллайдер. Если в этот момент в коллайдер попадает объект с интерфейсом `IDamageable`, ему наносится урон.

Компонент также может применять к цели физическую силу и создавать на месте попадания визуальный эффект (VFX).

---

## 2. Описание класса

### AdvancedAttackCollider
- **Пространство имен**: `Neo.Tools`
- **Путь к файлу**: `Assets/Neoxider/Scripts/Tools/Components/AttackSystem/AdvancedAttackCollider.cs`

**Описание**
Управляет временным коллайдером для регистрации атак ближнего боя.

### Ключевые особенности
- **Временная активация**: Коллайдер включается только на короткий промежуток времени.
- **Поддержка 2D и 3D**: Работает как с `Collider2D`, так и с `Collider`.
- **Фильтрация целей**: Позволяет настроить, на какие слои (`LayerMask`) будет реагировать атака.
- **Динамический урон**: Можно переопределить урон для каждой конкретной атаки через метод.
- **Предотвращение повторных попаданий**: Гарантирует, что одна и та же цель не получит урон несколько раз за одну атаку.
- **Физическое воздействие**: Опционально применяет силу к цели через компонент `AdvancedForceApplier`.
- **Настраиваемая визуализация**: Активный коллайдер подсвечивается в редакторе, причем цвет и само отображение гизмо можно настроить.

---

## 3. Настройки в инспекторе

#### Настройки атаки
- `attackDamage` (`int`): Урон по умолчанию.
- `triggerDuration` (`float`): Длительность в секундах, на которую активируется коллайдер.

#### Настройки коллайдера
- `disableColliderAfterAttack` (`bool`): Если `true`, коллайдер будет автоматически отключен по истечении `triggerDuration`.
- `collider2D` (`Collider2D`): Ссылка на 2D-коллайдер для регистрации атак.
- `collider3D` (`Collider`): Ссылка на 3D-коллайдер для регистрации атак.

#### Фильтрация целей
- `hittableLayers` (`LayerMask`): Маска слоев, на которые будет реагировать атака.

#### Применение силы
- `applyForceOnHit` (`bool`): Если `true`, к цели будет применен физический импульс.
- `forceMagnitude` (`float`): Величина силы, применяемой к цели.
- `forceDuration` (`float`): Длительность действия силы (используется компонентом `AdvancedForceApplier` на цели).

#### Эффекты
- `attackEffectPrefab` (`GameObject`): Префаб визуального эффекта, который создается в точке столкновения.

#### Настройки Gizmo
- `_showGizmo` (`bool`): Позволяет включить или выключить отображение гизмо в редакторе.
- `_gizmoColor` (`Color`): Цвет, которым будет подсвечиваться активный коллайдер.

---

## 4. Публичные методы

- `ActivateTrigger(int damage = -1)`: Активирует коллайдер атаки. 
  - **damage**: Позволяет переопределить урон для этой конкретной атаки. Если передать `-1` (значение по умолчанию), будет использован `attackDamage`.

---

## 5. Unity Events

- `OnAttackTriggerEnter2D`: Вызывается при столкновении с 2D-коллайдером. Передает `Collider2D` цели.
- `OnAttackTriggerEnter3D`: Вызывается при столкновении с 3D-коллайдером. Передает `Collider` цели.
- `OnDeactivateTrigger`: Вызывается после того, как коллайдер атаки снова отключается.

---

## 6. Визуализация в редакторе

Когда коллайдер атаки активен, он будет подсвечен в окне **Scene**. Это позволяет легко отлаживать дальность, размер и время действия атаки.

- Цвет подсветки можно изменить через поле `_gizmoColor`.
- Отображение гизмо можно полностью отключить с помощью флага `_showGizmo`.
