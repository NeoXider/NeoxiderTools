# Spawner

## Введение

`Spawner` — это мощный и гибкий компонент для создания (спавна) игровых объектов. Он тесно интегрирован с `PoolManager`, что делает его одновременно простым в настройке и высокопроизводительным.

**Ключевые функции:**
- **Интеграция с пулом объектов**: Автоматически использует `PoolManager`. Можно отключить для отладки.
- **Случайный выбор префаба**: Выбирает случайный префаб из заданного списка.
- **Автоматическое удаление**: Удаляет объекты (или возвращает в пул) через заданное время.
- **Области спавна**: Создает объекты в случайных точках внутри `Collider` (3D) или `Collider2D` (2D).
- **Непрерывный спавн**: Автоматически создает объекты с заданным интервалом и лимитом.
- **События**: Уведомляет другие системы о спавне объекта через `UnityEvent`.
- **Удобство отладки**: Позволяет вызывать ключевые методы прямо из инспектора с помощью кнопок.

---

## Описание класса

- **Пространство имен**: `Neo.Tools`
- **Путь к файлу**: `Assets/Neoxider/Scripts/Tools/Spawner/Spawner.cs`

---

## Настройки в инспекторе

### Spawn Settings
- `Prefabs` (`GameObject[]`): Массив префабов для спавна.
- `Use Object Pool` (`bool`): Если `true`, используется `PoolManager`. Если `false` — `Instantiate` и `Destroy`.
- `Destroy Delay` (`float`): Задержка в секундах перед удалением объекта. Если `0`, объект не удаляется.

### Events
- `On Object Spawned` (`UnityEvent<GameObject>`): Событие, вызываемое после спавна каждого объекта. Передает созданный `GameObject`.

### If spawnLimit is zero then infinite spawn
- `Spawn Limit` (`int`): Максимальное количество объектов для спавна. Если `0` — спавн бесконечен.
- `Min Spawn Delay` (`float`): Минимальная задержка между спавнами.
- `Max Spawn Delay` (`float`): Максимальная задержка между спавнами.

### Other Settings
- `Spawn Transform` (`Transform`): Родительский `Transform` для создаваемых объектов. По умолчанию — `Transform` самого спавнера.
- `Spawn On Awake` (`bool`): Если `true`, спавн начнется автоматически.

### Spawn Area
- `Spawn Area Collider` (`Collider`): 3D-коллайдер, внутри которого будут спавниться объекты.
- `Spawn Area Collider 2D` (`Collider2D`): 2D-коллайдер, внутри которого будут спавниться объекты.

---

## Публичные методы

| Метод | Возвращаемое значение | Описание |
| --- | --- | --- |
| `StartSpawn()` | `void` | Запускает процесс автоматического спавна. **[Button]** |
| `StopSpawn()` | `void` | Останавливает процесс автоматического спавна. **[Button]** |
| `SpawnRandomObject()` | `GameObject` | Спавнит случайный префаб в случайной точке. Возвращает созданный объект. **[Button]** |
| `SpawnById(int prefabId, Vector3 position)` | `GameObject` | Спавнит префаб по индексу `prefabId` в указанной позиции. Возвращает созданный объект. **[Button]** |
| `Clear()` | `void` | Останавливает спавн и удаляет все созданные объекты. **[Button]** |
| `SpawnObject(GameObject prefab, ...)` | `GameObject` | Основной метод, создающий объект из префаба. Вызывается другими методами спавна. |
| `GetSpawnPosition()` | `Vector3` | Возвращает случайную позицию для спавна внутри заданной области. |
| `GetActiveObjectCount()` | `int` | Возвращает количество активных объектов, созданных спавнером. |

---

## Как использовать

1.  **Убедитесь, что `PoolManager` есть на сцене** (если используете пулинг).
2.  Добавьте компонент `Spawner` на нужный вам объект.
3.  **Настройте префабы**: Заполните массив `Prefabs`.
4.  **(Опционально) Настройте авто-удаление**: Установите `Destroy Delay`.
5.  **(Опционально) Настройте область спавна**: Перетащите `Collider` или `Collider2D` в соответствующее поле.
6.  **Запустите спавн**: Вызовите `StartSpawn()` для автоматического спавна или используйте `SpawnRandomObject()`/`SpawnById()` для ручного создания. Используйте кнопки в инспекторе для быстрой проверки.
7.  **Подпишитесь на событие**: Настройте `On Object Spawned` в инспекторе, чтобы другие компоненты могли реагировать на спавн.

**Важно:** Чтобы пулинг работал эффективно, на компонентах ваших префабов рекомендуется реализовать интерфейс `IPoolable` для сброса их состояния при повторном использовании.
