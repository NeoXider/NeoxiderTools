# Инструмент Attack Execution

## 1. Введение

`AttackExecution` — это компонент, управляющий логикой и таймингами атаки. Он работает как простая стейт-машина, отвечая за скорость атаки, перезарядку (cooldown) и задержку перед нанесением фактического урона. Компонент позволяет запускать атаку и отслеживать ее фазы с помощью событий.

---

## 2. Описание класса

### AttackExecution
- **Пространство имен**: `Neo.Tools`
- **Путь к файлу**: `Assets/Neoxider/Scripts/Tools/Components/AttackSystem/AttackExecution.cs`

**Описание**
Менеджер таймингов и состояний для выполнения атаки.

### Ключевые особенности
- **Машина состояний**: Использует простой и надежный `enum` состояний (`Ready`, `Attacking`, `Cooldown`) для управления циклом атаки.
- **Скорость атаки**: Позволяет задать скорость атаки, из которой автоматически рассчитывается время перезарядки.
- **Авто-атака**: Может автоматически выполнять атаки, как только перезарядка завершилась.
- **Фазы атаки**: Разделяет атаку на несколько фаз с помощью событий: `OnStartAttack` (начало замаха), `OnAttack` (момент удара) и `OnEndAttack` (завершение перезарядки).
- **Гибкое управление**: Позволяет включать/выключать возможность атаковать и сбрасывать цикл атаки из других скриптов.

---

## 3. Настройки в инспекторе

- `_attackSpeed` (`float`): Базовая скорость атаки (атак в секунду).
- `multiplayAttackSpeed` (`float`): Множитель, который применяется к базовой скорости атаки.
- `delayTimeAttack` (`float`): Задержка в секундах между началом атаки (`OnStartAttack`) и моментом удара (`OnAttack`).
- `_isAutoAttack` (`bool`): Если `true`, компонент будет автоматически запускать атаку, как только она станет доступна.

---

## 4. Публичные свойства

- `CurrentState` (`AttackState`, только для чтения): Возвращает текущее состояние атаки (`Ready`, `Attacking` или `Cooldown`).
- `AttackCooldown` (`float`, только для чтения): Рассчитанное общее время перезарядки атаки в секундах.
- `AttackSpeed` (`float`): Позволяет получить или установить базовую скорость атаки из кода.
- `IsAutoAttack` (`bool`): Позволяет получить или установить режим авто-атаки из кода.
- `CanAttack` (`bool`, только для чтения): Возвращает `true`, если атака в данный момент возможна.

---

## 5. Публичные методы

- `Attack()`: Пытается инициировать атаку. Если успешно, запускает полный цикл атаки. Возвращает `bool` (`true`, если атака началась).
- `SetCanAttack(bool canAttack)`: Глобально разрешает или запрещает атаковать. Полезно для оглушения или обезоруживания персонажа.
- `ResetAttack()`: Немедленно прерывает текущий цикл атаки и возвращает компонент в состояние `Ready`, позволяя атаковать снова.

---

## 6. Unity Events

- `OnStartAttack`: Вызывается в момент начала атаки (например, для запуска анимации замаха).
- `OnAttack`: Вызывается в момент, когда атака должна нанести урон (после задержки `delayTimeAttack`).
- `OnEndAttack`: Вызывается, когда перезарядка завершена и можно атаковать снова.
