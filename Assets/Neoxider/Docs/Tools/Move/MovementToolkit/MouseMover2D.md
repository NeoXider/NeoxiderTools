# Компонент Mouse Mover 2D

## 1. Введение

`MouseMover2D` — это многофункциональный компонент для реализации различных механик управления объектом с помощью мыши. Несмотря на название "2D", компонент поддерживает работу на разных плоскостях (XY, XZ, YZ) и ограничение движения по отдельным осям, что делает его пригодным как для 2D, так и для 3D проектов. Он поддерживает пять разных режимов движения, от простого следования за курсором до перемещения в указанную точку, что делает его очень гибким инструментом для разных жанров игр.

Как и `KeyboardMover`, он автоматически определяет наличие `Rigidbody2D` на объекте для выбора между физическим и нефизическим способом перемещения.

---

## 2. Описание класса

### MouseMover2D
- **Пространство имен**: Глобальное
- **Путь к файлу**: `Assets/Neoxider/Scripts/Tools/Move/MovementToolkit/MouseMover2D.cs`
- **Реализует интерфейс**: `IMover`

**Описание**
Компонент, который считывает ввод с мыши и перемещает объект в соответствии с выбранным режимом (`MoveMode`).

### 2.1. Режимы движения (Move Mode)
Это ключевая настройка компонента, которая кардинально меняет его поведение:
- `DeltaNormalized` / `DeltaRaw`: Объект движется со скоростью, пропорциональной скорости движения мыши. Идеально для имитации перетаскивания объекта или для создания "виртуального джойстика", где игрок "тянет" персонажа за собой.
- `MoveToPointHold`: Пока игрок удерживает левую кнопку мыши, объект будет плавно двигаться к текущей позиции курсора.
- `ClickToPoint`: Классическая механика "point-and-click". Игрок один раз кликает в точку на экране, и объект начинает двигаться к ней.
- `Direction`: Игрок нажимает кнопку мыши (запоминается стартовая точка), а затем, не отпуская, ведет курсор в сторону. Объект начинает двигаться в направлении от стартовой точки к текущей позиции курсора. Подходит для "рогаточных" или "прицельных" механик.

### 2.2. Прочие настройки
- `axes` (`AxisMask`): Позволяет выбрать плоскость движения или ограничить движение по определённой оси.
  - `XY`: Движение в плоскости XY (2D-режим)
  - `XZ`: Движение в горизонтальной плоскости (для 3D с видом сверху)
  - `YZ`: Движение в плоскости YZ
  - `X`, `Y`, `Z`: Ограничение движения только по одной оси
- `speed`: Основная скорость движения объекта.
- `pxToWorld`: Коэффициент чувствительности для `Delta` режимов, определяющий, сколько мировых юнитов соответствует одному пикселю движения мыши.
- `mouseButton` (int): Индекс кнопки мыши (0 = левая, 1 = правая, 2 = средняя).
- **Delta-режимы (только для DeltaNormalized / DeltaRaw):**
  - `deltaOnlyWhenButtonHeld` (bool, по умолчанию **true**): если включено, движение по дельте мыши учитывается только при зажатой кнопке мыши; если выключено — объект реагирует на движение мыши постоянно.
  - `invertDeltaX` (bool): инвертировать горизонтальную ось (мышь вправо → объект влево).
  - `invertDeltaY` (bool): инвертировать вертикальную ось (мышь вверх → объект вниз).
- `arrivalThreshold` (float): Расстояние до цели, при котором движение считается достигнутым (по умолчанию 0.02).

**Камера:** если камера не назначена, в Awake подставляется `Camera.main`; при его отсутствии выводится однократное предупреждение (ScreenToWorld вернёт экранные координаты как мировые).

**Unity Events**
- `OnMoveStart`: Вызывается, когда объект начинает движение.
- `OnMoveStop`: Вызывается, когда объект останавливается.

---

## 3. Особенности работы

### Адаптация к Rigidbody2D
- **Если на объекте нет `Rigidbody2D`**: Компонент будет перемещать объект, напрямую изменяя его `transform.position`.
- **Если на объекте есть `Rigidbody2D`**: Компонент автоматически переключится на использование `Rigidbody2D.MovePosition()` в `FixedUpdate()`, что обеспечивает плавное и физически корректное движение.
